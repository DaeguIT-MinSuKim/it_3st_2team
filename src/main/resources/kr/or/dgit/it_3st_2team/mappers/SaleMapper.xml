<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.dgit.it_3st_2team.dao.SaleDao">
	<resultMap id="saleResult" type="Sale">
		<id property="saleNo" column="sale_no"/>
		<result property="description" column="description"/>
		<result property="sdate" column="sdate"/>
		<result property="stime" column="stime"/>
		<result property="sprice" column="sprice"/>
	</resultMap>
	
	<resultMap id="saleResultAddOthers" type="Sale" extends="saleResult">
		<association property="cusNo" resultMap="kr.or.dgit.it_3st_2team.dao.CustomerDao.customerResult"></association>
		<association property="empNo" resultMap="kr.or.dgit.it_3st_2team.dao.EmployeeDao.employeeResult"></association>
		<association property="evnNo" resultMap="kr.or.dgit.it_3st_2team.dao.EventDao.eventResult"></association>
	</resultMap>
	
	<select id="selectMaxSaleNo" resultType="int">
		select max(sale_no) from sale
	</select>
	
	<resultMap id="saleResultAddCustomer" type="Customer" extends="saleResult">
		<association property="cus" resultMap="kr.or.dgit.it_3st_2team.dao.CustomerDao.cusNameResult"/>
	</resultMap>
	
	<resultMap id="saleResultAddEmployee" type="Employee" extends="saleResult">
		<association property="emp" resultMap="kr.or.dgit.it_3st_2team.dao.EmployeeDao.empNameResult"/>
	</resultMap>
	
	<resultMap id="saleResultAddEvent" type="Event" extends="saleResult">
		<association property="evn" resultMap="kr.or.dgit.it_3st_2team.dao.EventDao.eventResult"/>
	</resultMap>
	<insert id="insertSale" parameterType="Sale">
		insert into sale(sale_no,sdate,stime,emp_no,cus_no,evn_no,sprice) 
		values(#{saleNo},#{sDate},#{sTime},#{emp},#{cus},#{evn},#{sPrice})
	</insert>
</mapper>